(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1cff0e0"],{"422a":function(e,a,t){},"5e64":function(e,a,t){"use strict";var n=t("28de"),r="/Admin",o={getAdminInfo:function(){return Object(n["a"])({url:"".concat(r,"/getAdminInfo"),method:"get"})},uploadAvatar:function(e){return Object(n["a"])({url:"".concat(r,"/uploadImage"),method:"post",data:e})},updateInfo:function(e){return Object(n["a"])({url:"".concat(r,"/updateInfo"),method:"post",data:e})},updatePwd:function(e,a){return Object(n["a"])({url:"".concat(r,"/updatePwd"),method:"post",params:{oldPassword:e,password:a}})},login:function(e,a){return Object(n["a"])({url:"".concat(r,"/login"),method:"get",params:{username:e,password:a}})},register:function(e){return Object(n["a"])({url:"".concat(r,"/register"),method:"post",data:e})},isInstall:function(){return Object(n["a"])({url:"".concat(r,"/isInstall"),method:"get"})},deleteAllInfo:function(){return Object(n["a"])({url:"".concat(r,"/ClearDB"),method:"get"})}};a["a"]=o},"66f8":function(e,a,t){"use strict";var n=t("28de"),r="/BlogInfo",o={loadInfo:function(){return Object(n["a"])({url:"".concat(r,"/getBlogInfo"),method:"get"})},updateInfo:function(e){return Object(n["a"])({url:"".concat(r,"/updateInfo"),method:"post",data:e})},installInfo:function(e){return Object(n["a"])({url:"".concat(r,"/installInfo"),method:"post",data:e})}};a["a"]=o},a39e:function(e,a,t){"use strict";var n=t("422a"),r=t.n(n);r.a},f4a7:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"lwj-container"},[e._m(0),t("a-divider",{staticClass:"divider"}),t("div",{staticClass:"animated"},[t("a-steps",{staticClass:"animated bounceIn",attrs:{size:"small",current:e.current}},[t("a-step",[t("template",{slot:"title"},[e._v(" 博主信息 ")])],2),t("a-step",{attrs:{title:"博客信息"}})],1),t("a-divider",{attrs:{dashed:""}}),t("div",{staticClass:"steps-content"},[t("a-form",{directives:[{name:"show",rawName:"v-show",value:0==e.current,expression:"current == 0"}],staticClass:"mr-tt",attrs:{layout:"horizontal",form:e.bloggerForm}},[t("a-form-item",{staticClass:"animated bounceIn"},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入用户名"}]}],expression:"[\n                  'username',\n                  {rules: [{ required: true, message: '请输入用户名' }]}\n                ]"}],attrs:{placeholder:"用户名"},model:{value:e.admin.username,callback:function(a){e.$set(e.admin,"username",a)},expression:"admin.username"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("a-form-item",{staticClass:"animated bounceIn",style:{"animation-delay":"0.1s"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickname",{rules:[{required:!0,message:"请输入昵称"}]}],expression:"[\n                  'nickname',\n                  {rules: [{ required: true, message: '请输入昵称' }]}\n                ]"}],attrs:{placeholder:"用户昵称"},model:{value:e.admin.nickname,callback:function(a){e.$set(e.admin,"nickname",a)},expression:"admin.nickname"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"smile"},slot:"prefix"})],1)],1),t("a-form-item",{staticClass:"animated bounceIn",style:{"animation-delay":"0.2s"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:"请输入邮箱"}]}],expression:"[\n                  'email',\n                  {rules: [{ required: true, message: '请输入邮箱' }]}\n                ]"}],attrs:{placeholder:"用户邮箱"},model:{value:e.admin.email,callback:function(a){e.$set(e.admin,"email",a)},expression:"admin.email"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),t("a-form-item",{staticClass:"animated bounceIn",style:{"animation-delay":"0.3s"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码（至少6位）"},{validator:e.handleValidatePassword}]}],expression:"[\n                  'password',\n                  {rules: [{ required: true, message: '请输入密码（至少6位）' },{ validator: handleValidatePassword }]}\n                ]"}],attrs:{type:"password",placeholder:"请输入密码（至少6位）"},model:{value:e.admin.password,callback:function(a){e.$set(e.admin,"password",a)},expression:"admin.password"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),t("a-form-item",{staticClass:"animated bounceIn",style:{"animation-delay":"0.4s"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",{rules:[{required:!0,message:"请输入确认密码"},{validator:e.handleValidateConfirmPassword}]}],expression:"[\n                  'confirmPassword',\n                  {rules: [{ required: true, message: '请输入确认密码' },{ validator: handleValidateConfirmPassword }]}\n                ]"}],attrs:{type:"password",placeholder:"确认密码"},model:{value:e.admin.confirmPassword,callback:function(a){e.$set(e.admin,"confirmPassword",a)},expression:"admin.confirmPassword"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1),t("a-form",{directives:[{name:"show",rawName:"v-show",value:1==e.current,expression:"current == 1"}],attrs:{layout:"horizontal"}},[t("a-form-item",{staticClass:"animated bounceIn"},[t("a-input",{attrs:{placeholder:"博客地址"},model:{value:e.blogInfo.blog_url,callback:function(a){e.$set(e.blogInfo,"blog_url",a)},expression:"blogInfo.blog_url"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"link"},slot:"prefix"})],1)],1),t("a-form-item",{staticClass:"animated bounceIn",style:{"animation-delay":"0.2s"}},[t("a-input",{attrs:{placeholder:"博客标题"},model:{value:e.blogInfo.blog_title,callback:function(a){e.$set(e.blogInfo,"blog_title",a)},expression:"blogInfo.blog_title"}},[t("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"book"},slot:"prefix"})],1)],1)],1)],1),t("a-row",{staticClass:"install-action",staticStyle:{"margin-top":"1rem"},attrs:{type:"flex",justify:"space-between"}},[t("div",[0!==e.current?t("a-button",{staticClass:"previus-button",staticStyle:{"margin-right":"1rem"},on:{click:function(a){e.current--}}},[e._v("上一步")]):e._e(),1!==e.current?t("a-button",{attrs:{type:"primary"},on:{click:e.handleNextStep}},[e._v("下一步")]):e._e()],1),1===e.current?t("a-button",{attrs:{type:"primary",icon:"upload",loading:e.installing},on:{click:e.handleInstall}},[e._v("初始化")]):e._e()],1)],1)],1)},r=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"zl-logo animated bounceIn"},[t("span",[e._v("ZL-Blog 安装向导")])])}],o=(t("d3b7"),t("96cf"),t("1da1")),s=t("5e64"),i=t("66f8"),l={name:"Install",data:function(){return{current:0,installing:!1,bloggerForm:this.$form.createForm(this),admin:{username:"",password:"",nickname:"",email:"",confirmPassword:""},blogInfo:{blog_title:"",blog_url:"",blog_logo:"https://cdn.v2ex.com/gravatar/9013edc31cccf23b6627e15e76ce8bfa?s=256&d=wavatar",blog_favicon:"https://cdn.v2ex.com/gravatar/9013edc31cccf23b6627e15e76ce8bfa?s=256&d=wavatar",blog_footer:""}}},created:function(){this.verifyIsInstall()},methods:{verifyIsInstall:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s["a"].isInstall().then((function(a){a.data.admin&&e.$router.push("/login")}));case 1:case"end":return a.stop()}}),a)})))()},handleValidateConfirmPassword:function(e,a,t){this.admin.confirmPassword&&this.admin.password!==this.admin.confirmPassword&&t("确认密码和密码不匹配"),t()},handleValidatePassword:function(e,a,t){this.admin.password.length<6&&t("密码不能低于 6 位"),t()},handleNextStep:function(e){var a=this;e.preventDefault(),this.bloggerForm.validateFields((function(e){null===e&&a.current++}))},handleInstall:function(){var e=this.admin.password,a=this.admin.confirmPassword;e===a?(this.installing=!0,this.install()):this.$message.error("确认密码和密码不匹配, 请检查")},install:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t=new FormData,t.append("username",e.admin.username),t.append("nickname",e.admin.nickname),t.append("password",e.admin.password),t.append("email",e.admin.email),n=new FormData,n.append("blog_title",e.blogInfo.blog_title),n.append("blog_url",e.blogInfo.blog_url),n.append("blog_logo","https://cdn.v2ex.com/gravatar/9013edc31cccf23b6627e15e76ce8bfa?s=256&d=wavatar"),n.append("blog_favicon","https://cdn.v2ex.com/gravatar/9013edc31cccf23b6627e15e76ce8bfa?s=256&d=wavatar"),n.append("blog_footer","@ 2020 made by lwjppz"),i["a"].installInfo(n).then((function(e){1e3===e.code&&console.log(e)})),s["a"].register(t).then((function(a){console.log(a),1e3===a.code&&(e.$message.success("初始化成功！现在你可以愉快的使用啦"),setTimeout((function(){e.$router.push("/login")}),300))})).finally((function(){e.installing=!1}));case 13:case"end":return a.stop()}}),a)})))()}}},c=l,d=(t("a39e"),t("2877")),u=Object(d["a"])(c,n,r,!1,null,"613b5c5a",null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-b1cff0e0.d772f924.js.map